```lw-blog-meta
{
"title": "gin 框架源代码速读",
"date":  "2020-04-03",
"brev":  "截止目前，在go的世界中，gin 应当算是最最流行的框架了。它简单、轻便，非常适合前后端分离的开发模式（即后端只负责数据交互，不负责渲染）。它的流行程度，从各大招聘平台的岗位描述上可见一斑。",
"tags":  ["Golang","坑","源码"]
}
```

## 概况

开源在[Github](https://github.com/gin-gonic/gin)上。选用的是`MIT`开源许可，截止目前有 36.6k star、21 release、259 contributor、200+ open-issue、1300+ commit，使用了`go mod`并且最新版本已经迭代到了v1.6.2，设置了travis-CI，travis报告测试覆盖率98%。

gin文档中自称是高性能的web框架（我好像记得以前自称是『最快的web框架』）。但是就我个人从一些渠道的“榜单”上看到，好像gin并不经常上榜，可能有很多原因吧。具体有多快，我没有做过定量的测评，不过主观感觉上来说是很不错的。

这是一个非常丰富和全面的框架，所以我们顺着几个常用的方法向下挖掘。

## 1. 运行服务器 Engine.Run()

```go
// 这是最基本的运行方式
eng := gin.Default()
eng.Run()
```

`Default()`创建了一个默认配置的引擎，上面配置了内置的Logger中间件和Recover中间件，以及打印出一些提示信息。

```go
// Default returns an Engine instance with the Logger and Recovery middleware already attached.
func Default() *Engine {
	debugPrintWARNINGDefault()
	engine := New()
	engine.Use(Logger(), Recovery())
	return engine
}
```

这里值得注意的是，这两个内置的中间件也是可以配置的。`Logger`中间件可以配置 Formatter, io.Writer 和 SkipPaths（不打印日志的url路径）；`Recovery`中间件只能配置 io.Writer 。